# í”„ë¡ íŠ¸ì—”ë“œ ì‹¤ì‹œê°„ ê°€ìƒ í”¼íŒ… ì—°ë™ ì™„ë£Œ

## ğŸ¯ êµ¬í˜„ ë‚´ìš©

"ì…ì–´ë³´ê¸°" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ **ì‹¤ì‹œê°„ ê°€ìƒ í”¼íŒ…**ì´ ì‹œì‘ë©ë‹ˆë‹¤!

---

## ğŸ†• ì¶”ê°€ëœ ê¸°ëŠ¥

### 1. ì‹¤ì‹œê°„ ê°€ìƒ í”¼íŒ… ëª¨ë“œ
- **ì‹œì‘/ì¤‘ì§€ í† ê¸€**: í•œ ë²ˆ í´ë¦­ìœ¼ë¡œ ì‹œì‘, ë‹¤ì‹œ í´ë¦­ìœ¼ë¡œ ì¤‘ì§€
- **ì‹¤ì‹œê°„ í”„ë ˆì„ ì²˜ë¦¬**: 200msë§ˆë‹¤ í”„ë ˆì„ì„ ì„œë²„ë¡œ ì „ì†¡í•˜ì—¬ ì²˜ë¦¬
- **ì¦‰ì‹œ í”¼ë“œë°±**: ì²˜ë¦¬ëœ ê²°ê³¼ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™”ë©´ì— í‘œì‹œ

### 2. ì˜· ì´ë¯¸ì§€ ì—…ë¡œë“œ
- **"ì˜· ì„ íƒ" ë²„íŠ¼**: ê°€ìƒ í”¼íŒ…ì— ì‚¬ìš©í•  ì˜· ì´ë¯¸ì§€ ì—…ë¡œë“œ
- **ì„œë²„ ì €ì¥**: `/api/fit/upload-cloth` APIë¡œ ì „ì†¡
- **ìë™ ë°°ê²½ ì œê±°**: ì„œë²„ì—ì„œ ìë™ìœ¼ë¡œ ë°°ê²½ ì œê±° í›„ ì‚¬ìš©

### 3. ì‹œê°ì  í”¼ë“œë°±
- **í”¼íŒ… ëª¨ë“œ í‘œì‹œ**: í™”ë©´ ì¢Œìƒë‹¨ì— "ğŸ½ ê°€ìƒ í”¼íŒ… ì¤‘..." ë°°ì§€
- **ìƒíƒœë°” ì—…ë°ì´íŠ¸**: "ğŸ½ ì‹¤ì‹œê°„ ê°€ìƒ í”¼íŒ… í™œì„±í™”" í‘œì‹œ
- **ë²„íŠ¼ ìƒíƒœ ë³€ê²½**: 
  - ë¹„í™œì„±: ë…¸ë€ìƒ‰ "ì…ì–´ë³´ê¸°"
  - í™œì„±: ì´ˆë¡ìƒ‰ "í”¼íŒ… ì¤‘ì§€"

---

## ğŸ® ì‚¬ìš© ë°©ë²•

### 1ë‹¨ê³„: ì˜· ì´ë¯¸ì§€ ì¤€ë¹„ (ì„ íƒ)
```
1. "ì˜· ì„ íƒ" ë²„íŠ¼ í´ë¦­
2. ì˜· ì´ë¯¸ì§€ íŒŒì¼ ì„ íƒ
3. ì—…ë¡œë“œ ì™„ë£Œ ì•Œë¦¼ í™•ì¸
```

**ê¸°ë³¸ ì˜·**: ì—…ë¡œë“œí•˜ì§€ ì•Šìœ¼ë©´ `input/cloth.jpg` ì‚¬ìš©

### 2ë‹¨ê³„: ì¹´ë©”ë¼ ì‹œì‘
```
ìë™ìœ¼ë¡œ ì¹´ë©”ë¼ê°€ ì‹œì‘ë¨
```

### 3ë‹¨ê³„: ê°€ìƒ í”¼íŒ… ì‹œì‘
```
1. "ì…ì–´ë³´ê¸°" ë²„íŠ¼ í´ë¦­ (ë…¸ë€ìƒ‰)
2. ë²„íŠ¼ì´ ì´ˆë¡ìƒ‰ "í”¼íŒ… ì¤‘ì§€"ë¡œ ë³€ê²½
3. ì‹¤ì‹œê°„ìœ¼ë¡œ ì˜·ì´ ì˜¤ë²„ë ˆì´ë¨
```

### 4ë‹¨ê³„: í”¼íŒ… ì¤‘ì§€
```
1. "í”¼íŒ… ì¤‘ì§€" ë²„íŠ¼ í´ë¦­ (ì´ˆë¡ìƒ‰)
2. ì¼ë°˜ ì¹´ë©”ë¼ ëª¨ë“œë¡œ ë³µê·€
```

---

## ğŸ”„ ë™ì‘ íë¦„

```
ì‚¬ìš©ì: "ì…ì–´ë³´ê¸°" ë²„íŠ¼ í´ë¦­
    â†“
í”„ë¡ íŠ¸: ê°€ìƒ í”¼íŒ… ëª¨ë“œ í™œì„±í™”
    â†“
í”„ë¡ íŠ¸: 200msë§ˆë‹¤ í”„ë ˆì„ ìº¡ì²˜
    â†“
í”„ë¡ íŠ¸: Base64ë¡œ ì¸ì½”ë”©
    â†“
í”„ë¡ íŠ¸: POST /api/fit/stream
    â†“
ë°±ì—”ë“œ: í”„ë ˆì„ ë””ì½”ë”©
    â†“
ë°±ì—”ë“œ: MediaPipe í¬ì¦ˆ ì¶”ì 
    â†“
ë°±ì—”ë“œ: ì˜· ê´€ì ˆ ë§¤ì¹­ ë° ë³€í˜•
    â†“
ë°±ì—”ë“œ: ì˜· ì˜¤ë²„ë ˆì´
    â†“
ë°±ì—”ë“œ: ì²˜ë¦¬ëœ í”„ë ˆì„ ë°˜í™˜
    â†“
í”„ë¡ íŠ¸: í™”ë©´ì— í‘œì‹œ
    â†“
(ë°˜ë³µ)
```

---

## ğŸ¨ UI êµ¬ì„±

### ë¹„ë””ì˜¤ ì˜ì—­
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ½ ê°€ìƒ í”¼íŒ… ì¤‘...      â”‚ â† í”¼íŒ… ëª¨ë“œ ë°°ì§€
â”‚                         â”‚
â”‚                         â”‚
â”‚   [ì‹¤ì‹œê°„ ì˜ìƒ/í”¼íŒ…]    â”‚
â”‚                         â”‚
â”‚                         â”‚
â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ ğŸ½ ì‹¤ì‹œê°„ ê°€ìƒ í”¼íŒ… í™œì„±í™” â”‚ â† ìƒíƒœë°”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë²„íŠ¼ ì˜ì—­
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì§ˆë¬¸í•˜ê¸° â”‚ ì˜·ì €ì¥   â”‚ ì˜· ì„ íƒ   â”‚ ì…ì–´ë³´ê¸° â”‚
â”‚          â”‚          â”‚ (NEW)   â”‚ (ë³€ê²½) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë²„íŠ¼ ìƒíƒœ:**
- ì˜· ì„ íƒ: íŒŒë€ìƒ‰ (info)
- ì…ì–´ë³´ê¸°: ë…¸ë€ìƒ‰ â†’ ì´ˆë¡ìƒ‰ (warning â†’ success)

---

## ğŸ“¡ API í†µì‹ 

### ì˜· ì´ë¯¸ì§€ ì—…ë¡œë“œ
```javascript
POST /api/fit/upload-cloth
{
    "image": "data:image/jpeg;base64,..."
}

Response:
{
    "success": true,
    "message": "ì˜· ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ",
    "path": "C:\\...\\cloth.jpg"
}
```

### ì‹¤ì‹œê°„ í”„ë ˆì„ ì²˜ë¦¬
```javascript
POST /api/fit/stream
{
    "frame": "data:image/jpeg;base64,...",
    "showSkeleton": true,
    "useWarp": true
}

Response:
{
    "success": true,
    "frame": "data:image/jpeg;base64,..."
}
```

---

## âš™ï¸ ì£¼ìš” ì„¤ì •

### í”„ë ˆì„ ì „ì†¡ ì£¼ê¸°
```javascript
fittingIntervalRef.current = setInterval(() => {
    sendFittingFrame();
}, 200);  // 200ms = 5 FPS
```

**ì¡°ì • ê°€ëŠ¥:**
- 100ms: 10 FPS (ë” ë¶€ë“œëŸ½ì§€ë§Œ ì„œë²„ ë¶€í•˜ ì¦ê°€)
- 200ms: 5 FPS (ê¶Œì¥)
- 500ms: 2 FPS (ëŠë¦¬ì§€ë§Œ ë¶€í•˜ ì ìŒ)

### JPEG í’ˆì§ˆ
```javascript
const frameData = canvas.toDataURL("image/jpeg", 0.8);
```

**í’ˆì§ˆ ì„¤ì •:**
- 0.5: ë‚®ì€ í’ˆì§ˆ, ë¹ ë¥¸ ì „ì†¡
- 0.8: ê¶Œì¥ (ê· í˜•)
- 1.0: ìµœê³  í’ˆì§ˆ, ëŠë¦° ì „ì†¡

---

## ğŸ¯ ìƒíƒœ ê´€ë¦¬

### React State
```javascript
const [isFittingMode, setIsFittingMode] = useState(false);
// ê°€ìƒ í”¼íŒ… ëª¨ë“œ í™œì„±í™” ì—¬ë¶€

const [fittingFrame, setFittingFrame] = useState(null);
// ì„œë²„ì—ì„œ ë°›ì€ ì²˜ë¦¬ëœ í”„ë ˆì„

const [showSkeleton, setShowSkeleton] = useState(true);
// ìŠ¤ì¼ˆë ˆí†¤ í‘œì‹œ ì—¬ë¶€ (í–¥í›„ í† ê¸€ ê¸°ëŠ¥ ì¶”ê°€ ê°€ëŠ¥)

const [useWarp, setUseWarp] = useState(true);
// ê´€ì ˆ ë§¤ì¹­ ë³€í˜• ì‚¬ìš© (í–¥í›„ í† ê¸€ ê¸°ëŠ¥ ì¶”ê°€ ê°€ëŠ¥)
```

### Refs
```javascript
const fittingIntervalRef = useRef(null);
// í”„ë ˆì„ ì „ì†¡ ì¸í„°ë²Œ ID

const clothFileInputRef = useRef(null);
// ì˜· íŒŒì¼ ì…ë ¥ ì°¸ì¡°
```

---

## ğŸ› ì—ëŸ¬ ì²˜ë¦¬

### í”„ë ˆì„ ì²˜ë¦¬ ì‹¤íŒ¨
```javascript
if (!response.ok) {
    console.error("[í”„ë¡ íŠ¸] í”¼íŒ… í”„ë ˆì„ ì²˜ë¦¬ ì‹¤íŒ¨:", response.status);
    return;  // ì¡°ìš©íˆ ì‹¤íŒ¨ (ë‹¤ìŒ í”„ë ˆì„ ê³„ì† ì‹œë„)
}
```

### ì˜· ì—…ë¡œë“œ ì‹¤íŒ¨
```javascript
catch (e) {
    console.error("[í”„ë¡ íŠ¸] ì˜· ì—…ë¡œë“œ ì—ëŸ¬:", e);
    alert("ì˜· ì—…ë¡œë“œ ì‹¤íŒ¨: " + e.message);
}
```

---

## ğŸ¨ ìŠ¤íƒ€ì¼ë§

### í”¼íŒ… ëª¨ë“œ ë°°ì§€
```javascript
{
    position: "absolute",
    top: 10,
    left: 10,
    background: "rgba(0, 255, 0, 0.7)",
    color: "white",
    padding: "8px 16px",
    borderRadius: 8,
    fontWeight: "bold"
}
```

### ë¹„ë””ì˜¤ ì „í™˜
```javascript
// ì¼ë°˜ ëª¨ë“œ: ë¹„ë””ì˜¤ í‘œì‹œ
display: isFittingMode ? "none" : "block"

// í”¼íŒ… ëª¨ë“œ: ì²˜ë¦¬ëœ ì´ë¯¸ì§€ í‘œì‹œ
{isFittingMode && fittingFrame && (
    <img src={fittingFrame} ... />
)}
```

---

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

### 1. í”„ë ˆì„ ì „ì†¡ ìµœì í™”
```javascript
// ì´ë¯¸ì§€ í’ˆì§ˆ ì¡°ì •
canvas.toDataURL("image/jpeg", 0.8)  // 80% í’ˆì§ˆ

// ì „ì†¡ ì£¼ê¸° ì¡°ì •
setInterval(sendFittingFrame, 200)  // 200ms ê°„ê²©
```

### 2. ì—ëŸ¬ ë³µêµ¬
```javascript
catch (error) {
    console.error(error);
    // ê³„ì† ì§„í–‰ (ë‹¤ìŒ í”„ë ˆì„ì—ì„œ ì¬ì‹œë„)
}
```

### 3. ë¦¬ì†ŒìŠ¤ ì •ë¦¬
```javascript
useEffect(() => {
    return () => {
        if (fittingIntervalRef.current) {
            clearInterval(fittingIntervalRef.current);
        }
    };
}, []);
```

---

## ğŸ“ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ë³¸ ì˜·ìœ¼ë¡œ í”¼íŒ…
```
1. "ì…ì–´ë³´ê¸°" ë²„íŠ¼ í´ë¦­
2. ê¸°ë³¸ ì˜·(input/cloth.jpg)ìœ¼ë¡œ í”¼íŒ… ì‹œì‘
3. ì‹¤ì‹œê°„ìœ¼ë¡œ ì˜·ì´ ì…í˜€ì§
4. "í”¼íŒ… ì¤‘ì§€"ë¡œ ì¢…ë£Œ
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì»¤ìŠ¤í…€ ì˜·ìœ¼ë¡œ í”¼íŒ…
```
1. "ì˜· ì„ íƒ" ë²„íŠ¼ í´ë¦­
2. ì›í•˜ëŠ” ì˜· ì´ë¯¸ì§€ ì—…ë¡œë“œ
3. "ì˜· ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ" ì•Œë¦¼ í™•ì¸
4. "ì…ì–´ë³´ê¸°" ë²„íŠ¼ í´ë¦­
5. ì—…ë¡œë“œí•œ ì˜·ìœ¼ë¡œ í”¼íŒ… ì‹œì‘
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì—¬ëŸ¬ ì˜· ë¹„êµ
```
1. ì²« ë²ˆì§¸ ì˜· ì—…ë¡œë“œ â†’ ì…ì–´ë³´ê¸°
2. "í”¼íŒ… ì¤‘ì§€"
3. ë‘ ë²ˆì§¸ ì˜· ì—…ë¡œë“œ â†’ ì…ì–´ë³´ê¸°
4. ë¹„êµ ì™„ë£Œ
```

---

## âš¡ í–¥í›„ ê°œì„  ê°€ëŠ¥ ì‚¬í•­

### 1. UI ê°œì„ 
- [ ] ìŠ¤ì¼ˆë ˆí†¤ ON/OFF í† ê¸€ ë²„íŠ¼
- [ ] ê´€ì ˆ ë§¤ì¹­ ëª¨ë“œ í† ê¸€ ë²„íŠ¼
- [ ] FPS ì¡°ì • ìŠ¬ë¼ì´ë”
- [ ] í’ˆì§ˆ ì„¤ì • ì˜µì…˜

### 2. ê¸°ëŠ¥ ì¶”ê°€
- [ ] í”¼íŒ… ê²°ê³¼ ìŠ¤í¬ë¦°ìƒ· ì €ì¥
- [ ] ì—¬ëŸ¬ ì˜· í”„ë¦¬ì…‹ ì €ì¥
- [ ] ì˜· ìƒ‰ìƒ ë³€ê²½
- [ ] í™•ëŒ€/ì¶•ì†Œ ê¸°ëŠ¥

### 3. ì„±ëŠ¥ ê°œì„ 
- [ ] WebSocket ì‚¬ìš© (HTTP ëŒ€ì‹ )
- [ ] í”„ë ˆì„ ì••ì¶•
- [ ] ìºì‹± ì „ëµ
- [ ] GPU ê°€ì†

---

## âœ… í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê¸°ë³¸ ê¸°ëŠ¥
- [ ] ì¹´ë©”ë¼ê°€ ìë™ìœ¼ë¡œ ì‹œì‘ë¨
- [ ] "ì…ì–´ë³´ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ í”¼íŒ… ì‹œì‘
- [ ] ì‹¤ì‹œê°„ìœ¼ë¡œ ì˜·ì´ í‘œì‹œë¨
- [ ] "í”¼íŒ… ì¤‘ì§€" ë²„íŠ¼ìœ¼ë¡œ ì¢…ë£Œ ê°€ëŠ¥
- [ ] ìƒíƒœë°”ì— "ê°€ìƒ í”¼íŒ… í™œì„±í™”" í‘œì‹œ

### ì˜· ì—…ë¡œë“œ
- [ ] "ì˜· ì„ íƒ" ë²„íŠ¼ìœ¼ë¡œ íŒŒì¼ ì„ íƒ ê°€ëŠ¥
- [ ] ì—…ë¡œë“œ ì„±ê³µ ì•Œë¦¼ í‘œì‹œ
- [ ] ì—…ë¡œë“œí•œ ì˜·ì´ í”¼íŒ…ì— ë°˜ì˜ë¨

### ì—ëŸ¬ ì²˜ë¦¬
- [ ] ì„œë²„ ì—°ê²° ì‹¤íŒ¨ ì‹œ ì¡°ìš©íˆ ì¬ì‹œë„
- [ ] ì˜· ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì•Œë¦¼ í‘œì‹œ
- [ ] ì¹´ë©”ë¼ ê¶Œí•œ ì—†ì„ ë•Œ ì ì ˆí•œ ë©”ì‹œì§€

---

## ğŸ“ í•µì‹¬ ì½”ë“œ

### ê°€ìƒ í”¼íŒ… ì‹œì‘/ì¤‘ì§€
```javascript
const handleStartFit = () => {
    if (isFittingMode) {
        stopVirtualFitting();
    } else {
        startVirtualFitting();
    }
};
```

### í”„ë ˆì„ ì „ì†¡
```javascript
const sendFittingFrame = async () => {
    // ìº”ë²„ìŠ¤ì— ë¹„ë””ì˜¤ í”„ë ˆì„ ê·¸ë¦¬ê¸°
    ctx.drawImage(video, 0, 0, w, h);
    
    // Base64 ì¸ì½”ë”©
    const frameData = canvas.toDataURL("image/jpeg", 0.8);
    
    // ì„œë²„ë¡œ ì „ì†¡
    const response = await fetch("/api/fit/stream", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            frame: frameData,
            showSkeleton: true,
            useWarp: true
        })
    });
    
    // ê²°ê³¼ í‘œì‹œ
    const result = await response.json();
    setFittingFrame(result.frame);
};
```

---

ì´ì œ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ "ì…ì–´ë³´ê¸°" ë²„íŠ¼ë§Œ í´ë¦­í•˜ë©´ ì‹¤ì‹œê°„ ê°€ìƒ í”¼íŒ…ì´ ì‹œì‘ë©ë‹ˆë‹¤! ğŸ‰
